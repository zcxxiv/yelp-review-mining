<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.5.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/yelp.ico?v=0.5.0" />






<meta name="description" content="IntroductionThe dataset we are using is from Yelp Dataset Challenge. There are six subsets in total: business, review, user, check-in, tip and photos.  And all the data are in json format.  We have be">
<meta property="og:type" content="article">
<meta property="og:title" content="Midterm Report">
<meta property="og:url" content="http://yoursite.com/2016/03/21/Midterm-Report/index.html">
<meta property="og:site_name" content="Yelp Review Mining">
<meta property="og:description" content="IntroductionThe dataset we are using is from Yelp Dataset Challenge. There are six subsets in total: business, review, user, check-in, tip and photos.  And all the data are in json format.  We have be">
<meta property="og:image" content="http://yoursite.com/images/map1.png">
<meta property="og:image" content="http://yoursite.com/images/barchart1.png">
<meta property="og:image" content="http://yoursite.com/images/barchart2.png">
<meta property="og:image" content="http://yoursite.com/images/ml_result.png">
<meta property="og:updated_time" content="2016-03-23T00:19:35.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Midterm Report">
<meta name="twitter:description" content="IntroductionThe dataset we are using is from Yelp Dataset Challenge. There are six subsets in total: business, review, user, check-in, tip and photos.  And all the data are in json format.  We have be">
<meta name="twitter:image" content="http://yoursite.com/images/map1.png">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>

  <title> Midterm Report | Yelp Review Mining </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Yelp Review Mining</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Midterm Report
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-03-21T08:20:44-04:00" content="2016-03-21">
              2016-03-21
            </time>
          </span>

          

          
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>The dataset we are using is from <a href="https://www.yelp.com/dataset_challenge/" target="_blank" rel="external">Yelp Dataset Challenge</a>. There are six subsets in total: business, review, user, check-in, tip and photos.  And all the data are in json format.  We have been using the business, review and user datasets, which contains 77,445 businesses, 2,225,213 reviews and 552,339 user profiles.  More specifically, we use the following data from these three sets:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">'business'</span>:</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">'business_id'</span>: (encrypted business id),</span><br><span class="line">        <span class="string">'state'</span>: (state),</span><br><span class="line">        <span class="string">'stars'</span>: (star rating, rounded to half-stars),</span><br><span class="line">        <span class="string">'review_count'</span>: (review count)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="string">'review'</span>: </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">'user_id'</span>: (encrypted user id),</span><br><span class="line">        <span class="string">'business_id'</span>: (encrypted business id),</span><br><span class="line">        <span class="string">'stars'</span>: (star rating, rounded to half-stars),</span><br><span class="line">        <span class="string">'text'</span>: (review text)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="string">'user'</span>: </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">'user_id'</span>: (encrypted user id),</span><br><span class="line">        <span class="string">'review_count'</span>: (review count),</span><br><span class="line">        <span class="string">'average_stars'</span>: (floating point average, like <span class="number">4.31</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Based on these data, we want to achieve the following two goals:</p>
<ol>
<li><p>Given a user’s review text, predict its star rating automatically. Our idea of approaching this goal is to create a sentiment file specifically for Yelp to predict review stars (1-5)</p>
<p> (a) This sentiment file should perform better at predicting review stars based on the review text comparing to the sentiment file we use during the ml lab.<br> (b) We may take into account that some users may tend to give overall higher stars. So if have time, we will take into the reviewer’s average stars into account and predict the review stars based on both the text and the user.</p>
</li>
<li><p>Study the different factors that affect the overall ratings of restaurants and create a report for each restaurant, giving them scores on their performance based on the review for each restaurant.</p>
</li>
</ol>
<p>The report will look like below:</p>
<pre><code>Business id: 
Service: Score from 1 to 5
Food: Score from 1 to 5
Location: Score from 1 to 5
Environment: Score from 1 to 5
</code></pre><p>And the report is aimed to help restaurants to improve their weakness and to help users have a better idea about how the restaurants are.</p>
<h1 id="Visualization"><a href="#Visualization" class="headerlink" title="Visualization"></a>Visualization</h1><p>A basic study of the business dataset reveals that the reviews we received for businesses on yelp are not evenly distributed among different states in the US.  In fact, our dataset contains most reviews for businesses in Nevada and Arizona.</p>
<img src="/images/map1.png" title="review count for each state">
<p>We also plot the distribution for the stars of businesses and find that most stores have average stars above 3:</p>
<img src="/images/barchart1.png" title="business average rating">
<p>Next, we focus on extracting useful information from the review dataset. It contains mostly 4-star and 5-star reviews.</p>
<img src="/images/barchart2.png" title="rating distribution">
<p>We look at all the 5-star (most positive) reviews as well as all the 1-star (most negative) review. We want to check the hypothesis below:<br>Positive words (words which should assign higher sentiment value) will appear in the 5-star reviews very often while not in the 1-star reviews. =&gt; Words appears very frequently in the 5-star reviews but rarely shows up from the 1-star reviews are the positive words.</p>
<ol>
<li><p>Negative words (words which should assign lower sentiment value) will appear in the 1-star reviews very often while not in the 5-star reviews. =&gt; Words appears very frequently in the 1-star reviews but rarely shows up from the 5-star reviews are the negative words.</p>
</li>
<li><p>Below are two word clouds, which show the most positive words as well the most negative words we find from the review based on our hypothesis. The bigger the word is, the more frequently it shows up in 5-star/1-star reviews. The rank of the word will show up if you place your mouse on the word.</p>
</li>
</ol>
<p><div id="wc1"></div></p>
<p align="center" style="color:#aaa"><strong>positive word cloud</strong></p>

<p><div id="wc2"></div></p>
<p align="center" style="color:#aaa"><strong>negative word cloud</strong></p>


<p>We perform the following steps to get the cleaned data:<br>Lowercase, delete all the stop words and punctuation and all reviews in other language.<br>Take all the reviews with scores 5 and 1, find the top 500 words that are most frequently shown in the reviews, named as wordlist1 (top 500 words in 1-star review) and wordlist5 (top 500 words in 5-star review)<br>Compare the two lists, delete any words that exist in both list<br>The words left in the wordlist5 are the positive words and the words left in wordlist1 are the negative words.</p>
<p>Based on the two word clouds above, our hypothesis on the positive words are supported: most of the “positive words” we find, especially the top 50 words, have a positive meaning with it, such as “awesome”, “fresh”, “excellent”, “favorite”, happy”, etc. However, our hypothesis of the negative words are not supported at all: most of the “negative words” we find, according to our hypothesis, don’t have any negative meaning behind it. Among the top 50 “negative words” we find, only two of them have noticeable negative meaning behind it (“bad” and “rude”).</p>
<p>A natural follow-up is to look at the most-frequent two-word and three-word phrases.</p>
<h1 id="Machine-Learning"><a href="#Machine-Learning" class="headerlink" title="Machine Learning"></a>Machine Learning</h1><p>For the machine learning part of our project, this time, we want to find the relationship between the restaurant’s actual star and the [city, state, price range, current_state] set. In order to make our result more reliable, we need to do some operations to the data we have. </p>
<p>First, we noticed that there is an attribute in the dataset called [review_count] and we counted number of all the reviews and average them to get a average review_count in the dataset to be 31.6. Then, what we do is to ingore all the data with a review_count less than the average number we just get. We took this step as small review_count will definitely cause a big bias on the rating as well as the star of the restaurant. Then, regarding to a restaurant, price_range is also extremely important. However, not all data in our dataset have a price_range attribute. Thus, what we mainly do is to just pick the data with the price_range tag to do the learning. In addition, the current status of the restaurant will also affect the star of the restaurant badly in common sense. In all, with all the parameters above plus [city, state] pair. We generated our training features.</p>
<p>Next, we need to move to the training label part. For training labels, we count the average star of all restaurants that have above average reviews and price range tag, again, in order to avoid bias of the data. Then, we give label 1 to stars more or equal to average star and 0 to stars less than averae star. In this way, we obtained all training labels and we start doing machine learining.</p>
<p>We used nb, log, svm models to model the data and did the 10-folder cross validation. The result turned out to be in the interval of [0.55, 0.60] and when print 10 most and 10 least informative features, the results all turned out to be city name. </p>
<img src="/images/ml_result.png" title="machine learning result">
<p>Analysis: If our accuracy of the 10-folder is high and the most/least informative features are all cities, we can conclude that the city where the restaurant locationed in really matters. However, in our case, the accuray is not high, thus, we cannot draw the conclusion that the city matters. On the other side, our accuracy is not always oscillation below and above 0.5, which means the feature set can actually give us some cule about the star of the restaurant. This is awesome as we can further explore the dataset to obtain a better result. Maybe we can combaine this machine learning method with other methods later to realize our final goal.</p>
<p>Conclusion: As for this machine learning method, we cannot rely on [city, state, price_range, current_state] to predict the star of the restaurant very correctly.</p>
<p><a href="https://www.dropbox.com/s/lc6e57ulzlukjox/midml.zip?dl=0" target="_blank" rel="external">Download code for machine learning</a></p>
<h1 id="Further-Discussion"><a href="#Further-Discussion" class="headerlink" title="Further Discussion"></a>Further Discussion</h1><p>There are two main difficulties we are facing with this project: </p>
<ol>
<li><p>The review set alone amounts to around 2GB of data. It takes a long time to do machine learning and test our hypothesis each time.</p>
</li>
<li><p>There are lots of feature generation methods as well as machine learning models. So far we have used word frequency counting, and experimented with the three classifiers from the machine learning lab: naive Bayes, logistic regression and support vector machine. But we are still trying to gain a deeper insight of the review data, and working on to combine it with the business and user data set.</p>
</li>
</ol>
<p>To solve these problems, we are hoping to learn more about MapReduce and AWS from the next lab, which will help us build a more effective way to process the data. We have also conducted preliminary literature search, and are planning to study latent factor recommender system.  If we have more time we will also read the paper Hidden factors and hidden topics: understanding rating dimensions with review text by J. McAuley and J. Leskovec, and try to apply the method in the paper to improve our model.</p>
<p>Overall, after our initial exploration of the data, we believe this is a deep dataset and contains lots of interesting hidden information. And we think we are on track with the project.</p>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script> <!-- JQUERY -->
<script src="http://d3js.org/d3.v3.min.js"></script>

<script>
// Word cloud layout by Jason Davies, http://www.jasondavies.com/word-cloud/
// Algorithm due to Jonathan Feinberg, http://static.mrfeinberg.com/bv_ch03.pdf
(function() {

if (typeof define === "function" && define.amd) define(["d3"], cloud);
else cloud(this.d3);

function cloud(d3) {
  d3.layout.cloud = function cloud() {
    var size = [256, 256],
        text = cloudText,
        font = cloudFont,
        fontSize = cloudFontSize,
        fontStyle = cloudFontNormal,
        fontWeight = cloudFontNormal,
        rotate = cloudRotate,
        padding = cloudPadding,
        spiral = archimedeanSpiral,
        words = [],
        timeInterval = Infinity,
        event = d3.dispatch("word", "end"),
        timer = null,
        random = Math.random,
        cloud = {};

    cloud.start = function() {
      var board = zeroArray((size[0] >> 5) * size[1]),
          bounds = null,
          n = words.length,
          i = -1,
          tags = [],
          data = words.map(function(d, i) {
            d.text = text.call(this, d, i);
            d.font = font.call(this, d, i);
            d.style = fontStyle.call(this, d, i);
            d.weight = fontWeight.call(this, d, i);
            d.rotate = rotate.call(this, d, i);
            d.size = ~~fontSize.call(this, d, i);
            d.padding = padding.call(this, d, i);
            return d;
          }).sort(function(a, b) { return b.size - a.size; });

      if (timer) clearInterval(timer);
      timer = setInterval(step, 0);
      step();

      return cloud;

      function step() {
        var start = Date.now();
        while (Date.now() - start < timeInterval && ++i < n && timer) {
          var d = data[i];
          d.x = (size[0] * (random() + .5)) >> 1;
          d.y = (size[1] * (random() + .5)) >> 1;
          cloudSprite(d, data, i);
          if (d.hasText && place(board, d, bounds)) {
            tags.push(d);
            event.word(d);
            if (bounds) cloudBounds(bounds, d);
            else bounds = [{x: d.x + d.x0, y: d.y + d.y0}, {x: d.x + d.x1, y: d.y + d.y1}];
            // Temporary hack
            d.x -= size[0] >> 1;
            d.y -= size[1] >> 1;
          }
        }
        if (i >= n) {
          cloud.stop();
          event.end(tags, bounds);
        }
      }
    }

    cloud.stop = function() {
      if (timer) {
        clearInterval(timer);
        timer = null;
      }
      return cloud;
    };

    function place(board, tag, bounds) {
      var perimeter = [{x: 0, y: 0}, {x: size[0], y: size[1]}],
          startX = tag.x,
          startY = tag.y,
          maxDelta = Math.sqrt(size[0] * size[0] + size[1] * size[1]),
          s = spiral(size),
          dt = random() < .5 ? 1 : -1,
          t = -dt,
          dxdy,
          dx,
          dy;

      while (dxdy = s(t += dt)) {
        dx = ~~dxdy[0];
        dy = ~~dxdy[1];

        if (Math.min(dx, dy) > maxDelta) break;

        tag.x = startX + dx;
        tag.y = startY + dy;

        if (tag.x + tag.x0 < 0 || tag.y + tag.y0 < 0 ||
            tag.x + tag.x1 > size[0] || tag.y + tag.y1 > size[1]) continue;
        // TODO only check for collisions within current bounds.
        if (!bounds || !cloudCollide(tag, board, size[0])) {
          if (!bounds || collideRects(tag, bounds)) {
            var sprite = tag.sprite,
                w = tag.width >> 5,
                sw = size[0] >> 5,
                lx = tag.x - (w << 4),
                sx = lx & 0x7f,
                msx = 32 - sx,
                h = tag.y1 - tag.y0,
                x = (tag.y + tag.y0) * sw + (lx >> 5),
                last;
            for (var j = 0; j < h; j++) {
              last = 0;
              for (var i = 0; i <= w; i++) {
                board[x + i] |= (last << msx) | (i < w ? (last = sprite[j * w + i]) >>> sx : 0);
              }
              x += sw;
            }
            delete tag.sprite;
            return true;
          }
        }
      }
      return false;
    }

    cloud.timeInterval = function(_) {
      return arguments.length ? (timeInterval = _ == null ? Infinity : _, cloud) : timeInterval;
    };

    cloud.words = function(_) {
      return arguments.length ? (words = _, cloud) : words;
    };

    cloud.size = function(_) {
      return arguments.length ? (size = [+_[0], +_[1]], cloud) : size;
    };

    cloud.font = function(_) {
      return arguments.length ? (font = d3.functor(_), cloud) : font;
    };

    cloud.fontStyle = function(_) {
      return arguments.length ? (fontStyle = d3.functor(_), cloud) : fontStyle;
    };

    cloud.fontWeight = function(_) {
      return arguments.length ? (fontWeight = d3.functor(_), cloud) : fontWeight;
    };

    cloud.rotate = function(_) {
      return arguments.length ? (rotate = d3.functor(_), cloud) : rotate;
    };

    cloud.text = function(_) {
      return arguments.length ? (text = d3.functor(_), cloud) : text;
    };

    cloud.spiral = function(_) {
      return arguments.length ? (spiral = spirals[_] || _, cloud) : spiral;
    };

    cloud.fontSize = function(_) {
      return arguments.length ? (fontSize = d3.functor(_), cloud) : fontSize;
    };

    cloud.padding = function(_) {
      return arguments.length ? (padding = d3.functor(_), cloud) : padding;
    };

    cloud.random = function(_) {
      return arguments.length ? (random = _, cloud) : random;
    };

    return d3.rebind(cloud, event, "on");
  };

  function cloudText(d) {
    return d.text;
  }

  function cloudFont() {
    return "serif";
  }

  function cloudFontNormal() {
    return "normal";
  }

  function cloudFontSize(d) {
    return Math.sqrt(d.value);
  }

  function cloudRotate() {
    return (~~(Math.random() * 6) - 3) * 30;
  }

  function cloudPadding() {
    return 1;
  }

  // Fetches a monochrome sprite bitmap for the specified text.
  // Load in batches for speed.
  function cloudSprite(d, data, di) {
    if (d.sprite) return;
    c.clearRect(0, 0, (cw << 5) / ratio, ch / ratio);
    var x = 0,
        y = 0,
        maxh = 0,
        n = data.length;
    --di;
    while (++di < n) {
      d = data[di];
      c.save();
      c.font = d.style + " " + d.weight + " " + ~~((d.size + 1) / ratio) + "px " + d.font;
      var w = c.measureText(d.text + "m").width * ratio,
          h = d.size << 1;
      if (d.rotate) {
        var sr = Math.sin(d.rotate * cloudRadians),
            cr = Math.cos(d.rotate * cloudRadians),
            wcr = w * cr,
            wsr = w * sr,
            hcr = h * cr,
            hsr = h * sr;
        w = (Math.max(Math.abs(wcr + hsr), Math.abs(wcr - hsr)) + 0x1f) >> 5 << 5;
        h = ~~Math.max(Math.abs(wsr + hcr), Math.abs(wsr - hcr));
      } else {
        w = (w + 0x1f) >> 5 << 5;
      }
      if (h > maxh) maxh = h;
      if (x + w >= (cw << 5)) {
        x = 0;
        y += maxh;
        maxh = 0;
      }
      if (y + h >= ch) break;
      c.translate((x + (w >> 1)) / ratio, (y + (h >> 1)) / ratio);
      if (d.rotate) c.rotate(d.rotate * cloudRadians);
      c.fillText(d.text, 0, 0);
      if (d.padding) c.lineWidth = 2 * d.padding, c.strokeText(d.text, 0, 0);
      c.restore();
      d.width = w;
      d.height = h;
      d.xoff = x;
      d.yoff = y;
      d.x1 = w >> 1;
      d.y1 = h >> 1;
      d.x0 = -d.x1;
      d.y0 = -d.y1;
      d.hasText = true;
      x += w;
    }
    var pixels = c.getImageData(0, 0, (cw << 5) / ratio, ch / ratio).data,
        sprite = [];
    while (--di >= 0) {
      d = data[di];
      if (!d.hasText) continue;
      var w = d.width,
          w32 = w >> 5,
          h = d.y1 - d.y0;
      // Zero the buffer
      for (var i = 0; i < h * w32; i++) sprite[i] = 0;
      x = d.xoff;
      if (x == null) return;
      y = d.yoff;
      var seen = 0,
          seenRow = -1;
      for (var j = 0; j < h; j++) {
        for (var i = 0; i < w; i++) {
          var k = w32 * j + (i >> 5),
              m = pixels[((y + j) * (cw << 5) + (x + i)) << 2] ? 1 << (31 - (i % 32)) : 0;
          sprite[k] |= m;
          seen |= m;
        }
        if (seen) seenRow = j;
        else {
          d.y0++;
          h--;
          j--;
          y++;
        }
      }
      d.y1 = d.y0 + seenRow;
      d.sprite = sprite.slice(0, (d.y1 - d.y0) * w32);
    }
  }

  // Use mask-based collision detection.
  function cloudCollide(tag, board, sw) {
    sw >>= 5;
    var sprite = tag.sprite,
        w = tag.width >> 5,
        lx = tag.x - (w << 4),
        sx = lx & 0x7f,
        msx = 32 - sx,
        h = tag.y1 - tag.y0,
        x = (tag.y + tag.y0) * sw + (lx >> 5),
        last;
    for (var j = 0; j < h; j++) {
      last = 0;
      for (var i = 0; i <= w; i++) {
        if (((last << msx) | (i < w ? (last = sprite[j * w + i]) >>> sx : 0))
            & board[x + i]) return true;
      }
      x += sw;
    }
    return false;
  }

  function cloudBounds(bounds, d) {
    var b0 = bounds[0],
        b1 = bounds[1];
    if (d.x + d.x0 < b0.x) b0.x = d.x + d.x0;
    if (d.y + d.y0 < b0.y) b0.y = d.y + d.y0;
    if (d.x + d.x1 > b1.x) b1.x = d.x + d.x1;
    if (d.y + d.y1 > b1.y) b1.y = d.y + d.y1;
  }

  function collideRects(a, b) {
    return a.x + a.x1 > b[0].x && a.x + a.x0 < b[1].x && a.y + a.y1 > b[0].y && a.y + a.y0 < b[1].y;
  }

  function archimedeanSpiral(size) {
    var e = size[0] / size[1];
    return function(t) {
      return [e * (t *= .1) * Math.cos(t), t * Math.sin(t)];
    };
  }

  function rectangularSpiral(size) {
    var dy = 4,
        dx = dy * size[0] / size[1],
        x = 0,
        y = 0;
    return function(t) {
      var sign = t < 0 ? -1 : 1;
      // See triangular numbers: T_n = n * (n + 1) / 2.
      switch ((Math.sqrt(1 + 4 * sign * t) - sign) & 3) {
        case 0:  x += dx; break;
        case 1:  y += dy; break;
        case 2:  x -= dx; break;
        default: y -= dy; break;
      }
      return [x, y];
    };
  }

  // TODO reuse arrays?
  function zeroArray(n) {
    var a = [],
        i = -1;
    while (++i < n) a[i] = 0;
    return a;
  }

  var cloudRadians = Math.PI / 180,
      cw = 1 << 11 >> 5,
      ch = 1 << 11,
      canvas,
      ratio = 1;

  if (typeof document !== "undefined") {
    canvas = document.createElement("canvas");
    canvas.width = 1;
    canvas.height = 1;
    ratio = Math.sqrt(canvas.getContext("2d").getImageData(0, 0, 1, 1).data.length >> 2);
    canvas.width = (cw << 5) / ratio;
    canvas.height = ch / ratio;
  } else {
    // Attempt to use node-canvas.
    canvas = new Canvas(cw << 5, ch);
  }

  var c = canvas.getContext("2d"),
      spirals = {
        archimedean: archimedeanSpiral,
        rectangular: rectangularSpiral
      };
  c.fillStyle = c.strokeStyle = "red";
  c.textAlign = "center";
}

})();
</script>

<script src="/javascript/wc.js"></script>

      
    </div>

    <div>
      
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/meat.jpg"
               alt="CS1951a" />
          <p class="site-author-name" itemprop="name">CS1951a</p>
          <p class="site-description motion-element" itemprop="description">Final Project Blog</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">1</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        <div class="links-of-blogroll motion-element">
          
        </div>

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator">
            <i class="fa fa-angle-double-up"></i>
          </div>
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Introduction"><span class="nav-number">1.</span> <span class="nav-text">Introduction</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Visualization"><span class="nav-number">2.</span> <span class="nav-text">Visualization</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Machine-Learning"><span class="nav-number">3.</span> <span class="nav-text">Machine Learning</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Further-Discussion"><span class="nav-number">4.</span> <span class="nav-text">Further Discussion</span></a></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator">
            <i class="fa fa-angle-double-down"></i>
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">CS1951a</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  


  




<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=0.5.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=0.5.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=0.5.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=0.5.0"></script>



  
  
<script type="text/javascript" src="/js/src/scrollspy.js?v=0.5.0"></script>

<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.motion.complete', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      var $indicator = $(indicator);
      var opacity = action === 'show' ? 1 : 0;
      $indicator.velocity ?
        $indicator.velocity('stop').velocity({
          opacity: opacity
        }, { duration: 100 }) :
        $indicator.stop().animate({
          opacity: opacity
        }, 100);
    }

  });
</script>

<script type="text/javascript" id="sidebar.nav">
  $(document).ready(function () {
    var html = $('html');
    var TAB_ANIMATE_DURATION = 200;
    var hasVelocity = $.isFunction(html.velocity);

    $('.sidebar-nav li').on('click', function () {
      var item = $(this);
      var activeTabClassName = 'sidebar-nav-active';
      var activePanelClassName = 'sidebar-panel-active';
      if (item.hasClass(activeTabClassName)) {
        return;
      }

      var currentTarget = $('.' + activePanelClassName);
      var target = $('.' + item.data('target'));

      hasVelocity ?
        currentTarget.velocity('transition.slideUpOut', TAB_ANIMATE_DURATION, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', TAB_ANIMATE_DURATION)
            .addClass(activePanelClassName);
        }) :
        currentTarget.animate({ opacity: 0 }, TAB_ANIMATE_DURATION, function () {
          currentTarget.hide();
          target
            .stop()
            .css({'opacity': 0, 'display': 'block'})
            .animate({ opacity: 1 }, TAB_ANIMATE_DURATION, function () {
              currentTarget.removeClass(activePanelClassName);
              target.addClass(activePanelClassName);
            });
        });

      item.siblings().removeClass(activeTabClassName);
      item.addClass(activeTabClassName);
    });

    $('.post-toc a').on('click', function (e) {
      e.preventDefault();
      var targetSelector = NexT.utils.escapeSelector(this.getAttribute('href'));
      var offset = $(targetSelector).offset().top;
      hasVelocity ?
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        }) :
        $('html, body').stop().animate({
          scrollTop: offset
        }, 500);
    });

    // Expand sidebar on post detail page by default, when post has a toc.
    NexT.motion.middleWares.sidebar = function () {
      var $tocContent = $('.post-toc-content');

      if (CONFIG.sidebar.display === 'post' || CONFIG.sidebar.display === 'always') {
        if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
          NexT.utils.displaySidebar();
        }
      }
    };
  });
</script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=0.5.0"></script>



  



  



  
  
  

  


</body>
</html>
