<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.5.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/yelp.ico?v=0.5.0" />






<meta name="description" content="This week, our group paid more attention to the dataset itself as we want to explore more interesting facts that hide in our dataset. The steps taken this week will help us better understand our datas">
<meta property="og:type" content="article">
<meta property="og:title" content="Blog Post 1">
<meta property="og:url" content="http://yoursite.com/2016/04/19/post1/index.html">
<meta property="og:site_name" content="Yelp Review Mining">
<meta property="og:description" content="This week, our group paid more attention to the dataset itself as we want to explore more interesting facts that hide in our dataset. The steps taken this week will help us better understand our datas">
<meta property="og:image" content="http://yoursite.com/images/map.post1.png">
<meta property="og:image" content="http://yoursite.com/images/1.post1.png">
<meta property="og:image" content="http://yoursite.com/images/2.post1.png">
<meta property="og:updated_time" content="2016-04-19T21:07:51.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Blog Post 1">
<meta name="twitter:description" content="This week, our group paid more attention to the dataset itself as we want to explore more interesting facts that hide in our dataset. The steps taken this week will help us better understand our datas">
<meta name="twitter:image" content="http://yoursite.com/images/map.post1.png">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>

  <title> Blog Post 1 | Yelp Review Mining </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Yelp Review Mining</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Blog Post 1
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-04-19T00:00:00-04:00" content="2016-04-19">
              2016-04-19
            </time>
          </span>

          

          
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>This week, our group paid more attention to the dataset itself as we want to explore more interesting facts that hide in our dataset. The steps taken this week will help us better understand our dataset.</p>
<h1 id="Location-and-Stars"><a href="#Location-and-Stars" class="headerlink" title="Location and Stars"></a>Location and Stars</h1><p>The first thing we noticed is that in the business json file, we have stars and state field of each business. With these information, we all want to see if the star have some special distribution all over the country. As we are doing the cleaning steps, we found our that yelp dataset do not cover all the states in US. We can only find data regarding to the following states [‘PA’, ‘NC’, ‘SC’, ‘WI’, ‘IL’, ‘AZ’, ‘NV’, ‘NM’, ‘AR’, ‘QC’, ‘ON’, ‘TX’, ‘EDH’, ‘MLN’, ‘ELN’, ‘HAM’, ‘SCB’, ‘FIF’, ‘NTH’, ‘BW’, ‘RP’, ‘CA’, ‘KHL’, ‘MN’, ‘MA’, ‘NW’, ‘OR’, ‘AL’]. However, as these stats do not only gather in a certain place which will have huge probability of causing bias, it is all right. Then, we count the number of business regarding to the states, which gives us the following result, [3754, 6162, 271, 2802, 737, 32614, 21233, 1, 1, 4942, 474, 2, 3206, 147, 12, 1, 3, 5, 1, 1048, 18, 3, 1, 1, 1, 1, 1, 1]. As we all know that small numbers can cause bias, what we did is that we ignored all the states that have business data less than 20. In the meaning time, we also keep track of the sum of stars of these business. Thus, finally, we got three lists.</p>
<ul>
<li>All states, [‘PA’, ‘NC’, ‘SC’, ‘WI’, ‘IL’, ‘AZ’, ‘NV’, ‘QC’, ‘ON’, ‘EDH’, ‘MLN’, ‘BW’]</li>
<li>Number of business within each state, [3754, 6162, 271, 2802, 737, 32614, 21233, 4942, 474, 3206, 147, 1048]</li>
<li>Total stars of business within each state, [13892.5, 22113.5, 967.0, 10254.0, 2617.5, 121008.5, 78200.0, 18335.0, 1698.5, 12210.5, 564.5, 3963.0].</li>
</ul>
<p>The last step is to divide the third list by the second list by index, in this step, we got the average star of business in each state as the following [3.701, 3.589, 3.568, 3.66, 3.552, 3.71, 3.683, 3.71, 3.583, 3.809, 3.84, 3.781].</p>
<p>Take a look at the list of average stars, average star of all states is 3.682. As our data is samples, we need to use the sample formula to calculate the variance which is 0.00924 at last. From these analysis, we can see that the average star do not vary too much, they are all in the interval [3.552, 3.84], the maximum difference is less than 0.3.</p>
<p>Then, with only nums, it not easy for us to get a overall understanding how the average stars vary from state to state according to location. Thus, we make the following visualization to help us. When creating the visualiztion, we find another problem that ‘EDH’, ‘MLN’, ‘BW’, ‘ON’, ‘QC’ do not exist as US states. As a result, these parts of data are ignored. The created visualization is shown in the following graph.</p>
<img src="/images/map.post1.png" title="Average rating in each state">
<p>In the visualization, the darker the color is, the higher the average star is. There are states with high average star on both east and west part, which reveals the data is not too bias to be used as a valid dataset. However, as we found out that there are only 7 valid states with enough data, in the next steps, we may want to use the Yelp Api to get more data about other states.</p>
<h1 id="Check-in-Time-Distribution"><a href="#Check-in-Time-Distribution" class="headerlink" title="Check-in Time Distribution"></a>Check-in Time Distribution</h1><p>When further exploring our dataset, we found that in check-in json file we have check-in info for 24 hours a day in the whole week. Then, we come up with the idea that we can use these data to find the check-in pattern with respect of day in week and different hours within a day. After we clean the data, we get the following 7 lists(day in week), each list contain 24 nums(hours).</p>
<ul>
<li>Sunday = [11672, 6793, 4656, 4659, 6340, 11031, 15479, 23794, 31345, 40109, 49002, 71565, 82624, 66888, 58790, 59172, 67284, 81184, 84958, 71604, 51379, 34099, 20309, 13113]</li>
<li>Monday = [9140, 5352, 3533, 3696, 6419, 11185, 16004, 24685, 31388, 38678, 46984, 69591, 79355, 60188, 53369, 56892, 68874, 85823, 91069, 78152, 55278, 35855, 21177, 13397]</li>
<li>Tuesday = [9266, 5474, 3566, 3744, 6262, 11226, 15705, 24949, 31958, 39805, 47032, 70598, 81182, 62740, 55020, 58579, 69970, 88317, 94968, 82354, 58099, 37617, 18451, 14153]</li>
<li>Wednesday = [10466, 6085, 4208, 3700, 6420, 11089, 16079, 25211, 32443, 40629, 48605, 72010, 83665, 64185, 56654, 60532, 72568, 91697, 99198, 87207, 63637, 43412, 27694, 19062]</li>
<li>Thursday = [13549, 8360, 5493, 4736, 6989, 11703, 17660, 28236, 37778, 47623, 57972, 85624, 101500, 81173, 73052, 77023, 91814, 115822, 130199, 122775, 96646, 72325, 51606, 37224]</li>
<li>Friday = [26648, 17131, 10907, 8376, 7128, 9412, 16475, 30624, 51195, 72734, 93083, 116725, 129476, 124565, 111156, 104013, 103802, 113501, 122653, 115377, 95207, 73408, 53660, 39508]</li>
<li>Saturday = [28314, 17893, 10785, 7958, 6457, 7824, 12423, 23639, 41881, 64080, 85120, 106712, 118690, 111135, 95316, 84946, 81315, 84199, 83877, 71611, 53112, 36528, 23570, 16188]</li>
</ul>
<p>It’s not a good way to find the pattern with only several lists of numbers. Thus, we created two visualizations.</p>
<p>The first visualization is number of check-in with respect of day in a week.</p>
<img src="/images/1.post1.png" title="Check-in count for each day in a week">
<p>From the visualization we can see that people tend to go to restaurant in later part of the week. We can see the peak in Friday, which makes sense to all of us as that’s what we do on Friday. However, what we do not expected at first is the number of check-in on Thursday. It is even bigger than the number in Saturday.</p>
<p>The second visualization is the number of check-in with respect of different hours in a day. In this graph, we expect to have two peaks in about 12:00 am and 6:00 pm as they are typical time of eating. In this visualization, we chose to use line graph to better reveal the change pattern of numbers.</p>
<img src="/images/2.post1.png" title="Check-in count for time in a day">
<p>From the graph we can easily see the two peaks in 12:00-13:00, 18:00-19:00 which also fits our expectation. If we ignore the two peaks for a second, the graph is somewhat like a normal distribution in its two tails, which means most of the check-in happens in the middle part of the day, from 9:00 to 21:00.</p>
<h1 id="Next-Step"><a href="#Next-Step" class="headerlink" title="Next Step"></a>Next Step</h1><p>As we have deeply explored the data, the next thing we want to do is to study the review dataset, and predict the star for reviews and businesses with the text reviews provided using the bag-of-words model and other natural language processing algorithms such as LDA (latent Dirichlet allocation) and Word2Vec.</p>

      
    </div>

    <div>
      
        
      
    </div>

    <footer class="post-footer">
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/03/21/Midterm-Report/" rel="next" title="Midterm Report">
                <i class="fa fa-chevron-left"></i> Midterm Report
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/04/26/post2/" rel="prev" title="Blog Post 2">
                Blog Post 2 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/logo.png"
               alt="CS1951a" />
          <p class="site-author-name" itemprop="name">CS1951a</p>
          <p class="site-description motion-element" itemprop="description">Final Project Blog</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">5</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        <div class="links-of-blogroll motion-element">
          
            <div class="links-of-blogroll-title">Group Members</div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.pusheen.com/" target="_blank">Chang Liu [cl137]</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.pusheen.com/" target="_blank">Hanwen Ren [hren]</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.pusheen.com/" target="_blank">Zheng Shi [zs9]</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.pusheen.com/" target="_blank">Ziyuan Chen [zchen24]</a>
                </li>
              
            </ul>
          
        </div>

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator">
            <i class="fa fa-angle-double-up"></i>
          </div>
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Location-and-Stars"><span class="nav-number">1.</span> <span class="nav-text">Location and Stars</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Check-in-Time-Distribution"><span class="nav-number">2.</span> <span class="nav-text">Check-in Time Distribution</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Next-Step"><span class="nav-number">3.</span> <span class="nav-text">Next Step</span></a></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator">
            <i class="fa fa-angle-double-down"></i>
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">CS1951a</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  


  




<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=0.5.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=0.5.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=0.5.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=0.5.0"></script>



  
  
<script type="text/javascript" src="/js/src/scrollspy.js?v=0.5.0"></script>

<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.motion.complete', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      var $indicator = $(indicator);
      var opacity = action === 'show' ? 1 : 0;
      $indicator.velocity ?
        $indicator.velocity('stop').velocity({
          opacity: opacity
        }, { duration: 100 }) :
        $indicator.stop().animate({
          opacity: opacity
        }, 100);
    }

  });
</script>

<script type="text/javascript" id="sidebar.nav">
  $(document).ready(function () {
    var html = $('html');
    var TAB_ANIMATE_DURATION = 200;
    var hasVelocity = $.isFunction(html.velocity);

    $('.sidebar-nav li').on('click', function () {
      var item = $(this);
      var activeTabClassName = 'sidebar-nav-active';
      var activePanelClassName = 'sidebar-panel-active';
      if (item.hasClass(activeTabClassName)) {
        return;
      }

      var currentTarget = $('.' + activePanelClassName);
      var target = $('.' + item.data('target'));

      hasVelocity ?
        currentTarget.velocity('transition.slideUpOut', TAB_ANIMATE_DURATION, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', TAB_ANIMATE_DURATION)
            .addClass(activePanelClassName);
        }) :
        currentTarget.animate({ opacity: 0 }, TAB_ANIMATE_DURATION, function () {
          currentTarget.hide();
          target
            .stop()
            .css({'opacity': 0, 'display': 'block'})
            .animate({ opacity: 1 }, TAB_ANIMATE_DURATION, function () {
              currentTarget.removeClass(activePanelClassName);
              target.addClass(activePanelClassName);
            });
        });

      item.siblings().removeClass(activeTabClassName);
      item.addClass(activeTabClassName);
    });

    $('.post-toc a').on('click', function (e) {
      e.preventDefault();
      var targetSelector = NexT.utils.escapeSelector(this.getAttribute('href'));
      var offset = $(targetSelector).offset().top;
      hasVelocity ?
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        }) :
        $('html, body').stop().animate({
          scrollTop: offset
        }, 500);
    });

    // Expand sidebar on post detail page by default, when post has a toc.
    NexT.motion.middleWares.sidebar = function () {
      var $tocContent = $('.post-toc-content');

      if (CONFIG.sidebar.display === 'post' || CONFIG.sidebar.display === 'always') {
        if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
          NexT.utils.displaySidebar();
        }
      }
    };
  });
</script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=0.5.0"></script>



  



  



  
  
  

  


</body>
</html>
